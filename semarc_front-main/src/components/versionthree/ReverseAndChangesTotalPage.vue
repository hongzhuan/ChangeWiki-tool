<template>
  <div class="vscode-layout">
    
    <!-- å·¦ä¾§æ ‘å½¢ç»“æ„ -->
    <div class="sidebar" :style="{ width: sidebarWidth + 'px' }">
      <div class="user-info" @click.stop="toggleUserMenu">
        <span class="avatar-emoji">ğŸ‘¤</span>
        <span style=" width: 40%; color: white; border-color: white; font-size: 1.2rem; font-family: 'Courier New', Courier, monospace;">{{ username }}</span>
      </div>
      <div v-if="showUserMenu" class="user-dropdown">
        <div class="dropdown-item" @click="goUserInfo" style=" width: 40%; color: white; border-color: white; font-size: 1.2rem; font-family: 'Courier New', Courier, monospace;">ç”¨æˆ·ä¿¡æ¯</div>
        <div class="dropdown-item" @click="logout" style=" width: 40%; color: white; border-color: white; font-size: 1.2rem; font-family: 'Courier New', Courier, monospace;">é€€å‡ºç™»å½•</div>
      </div>
      <div class="tree-container">
        <div class="tree-header">
          <div class="header-row">
          <svg t="1750470595517" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4829" width="24" height="24"><path d="M870.627556 589.198222h-105.130667v-17.635555a78.734222 78.734222 0 0 0-77.937778-78.336c-29.184-0.227556-58.481778 0-87.779555 0H533.504v-56.206223h92.899556c30.72 0 55.580444-24.803556 55.580444-55.523555V154.282667a55.523556 55.523556 0 0 0-55.466667-55.466667h-226.986666a55.580444 55.580444 0 0 0-55.523556 55.466667v226.986666c0 30.606222 24.803556 55.409778 55.466667 55.523556h89.6v56.32H335.644444a82.147556 82.147556 0 0 0-26.965333 3.868444c-23.210667 8.021333-41.415111 26.168889-49.436444 49.436445-4.209778 12.060444-3.868444 24.689778-3.868445 37.262222v3.925333H153.372444a55.637333 55.637333 0 0 0-55.580444 55.409778v226.986667a55.182222 55.182222 0 0 0 55.523556 55.523555h226.986666c30.72 0 55.523556-24.803556 55.523556-55.523555v-226.986667a55.466667 55.466667 0 0 0-55.523556-55.523555h-80.782222v-15.473778a64.625778 64.625778 0 0 1 0.284444-6.257778c0.113778-0.455111 0.113778-0.853333 0.113778-1.365333v0.796444c0.568889-2.844444 1.479111-5.688889 2.503111-8.419555a44.032 44.032 0 0 1 2.958223-5.12c0.739556-1.024 1.536-1.934222 2.104888-3.072l-0.512 0.910222 0.113778-0.113778c1.536-1.706667 3.185778-3.185778 4.835556-4.778667l1.592889-1.194666c1.706667-1.137778 3.413333-2.104889 5.290666-3.015111l-1.024 0.227555c1.024-0.227556 1.934222-0.739556 2.901334-1.137778 2.218667-0.682667 4.551111-1.251556 6.826666-1.763555l2.616889-0.341334h360.049778l1.934222 0.113778 0.910222 0.227556a56.888889 56.888889 0 0 1 5.859556 1.592889c1.194667 0.398222 2.275556 0.967111 3.527111 1.308444l-0.910222-0.227555c2.275556 1.194667 4.551111 2.503111 6.599111 3.925333l0.796444 0.682667 4.323556 4.209777 0.056889 0.170667-0.455111-0.967111c0.455111 0.910222 1.137778 1.706667 1.706666 2.503111 1.137778 1.763556 2.275556 3.697778 3.413334 5.688889l0.568889 1.479111 0.398222 1.137778a39.537778 39.537778 0 0 1 1.592889 5.859555l0.113778 0.341334v-1.308445l0.170666 2.503111c0.113778 1.763556 0.113778 3.584 0.113778 5.404445v16.782222H643.413333a55.523556 55.523556 0 0 0-55.523555 55.580444v226.986667c0 30.72 24.803556 55.523556 55.523555 55.523556h226.986667a55.637333 55.637333 0 0 0 55.580444-55.466667v-226.986667a55.751111 55.751111 0 0 0-16.270222-39.310222 55.352889 55.352889 0 0 0-39.082666-15.928889z" fill="#7997E4" p-id="4830"></path></svg>
          <h3>æ¶æ„å˜æ›´</h3>
          
        </div>
          <!-- <svg t="1750470595517" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4829" width="200" height="200"><path d="M870.627556 589.198222h-105.130667v-17.635555a78.734222 78.734222 0 0 0-77.937778-78.336c-29.184-0.227556-58.481778 0-87.779555 0H533.504v-56.206223h92.899556c30.72 0 55.580444-24.803556 55.580444-55.523555V154.282667a55.523556 55.523556 0 0 0-55.466667-55.466667h-226.986666a55.580444 55.580444 0 0 0-55.523556 55.466667v226.986666c0 30.606222 24.803556 55.409778 55.466667 55.523556h89.6v56.32H335.644444a82.147556 82.147556 0 0 0-26.965333 3.868444c-23.210667 8.021333-41.415111 26.168889-49.436444 49.436445-4.209778 12.060444-3.868444 24.689778-3.868445 37.262222v3.925333H153.372444a55.637333 55.637333 0 0 0-55.580444 55.409778v226.986667a55.182222 55.182222 0 0 0 55.523556 55.523555h226.986666c30.72 0 55.523556-24.803556 55.523556-55.523555v-226.986667a55.466667 55.466667 0 0 0-55.523556-55.523555h-80.782222v-15.473778a64.625778 64.625778 0 0 1 0.284444-6.257778c0.113778-0.455111 0.113778-0.853333 0.113778-1.365333v0.796444c0.568889-2.844444 1.479111-5.688889 2.503111-8.419555a44.032 44.032 0 0 1 2.958223-5.12c0.739556-1.024 1.536-1.934222 2.104888-3.072l-0.512 0.910222 0.113778-0.113778c1.536-1.706667 3.185778-3.185778 4.835556-4.778667l1.592889-1.194666c1.706667-1.137778 3.413333-2.104889 5.290666-3.015111l-1.024 0.227555c1.024-0.227556 1.934222-0.739556 2.901334-1.137778 2.218667-0.682667 4.551111-1.251556 6.826666-1.763555l2.616889-0.341334h360.049778l1.934222 0.113778 0.910222 0.227556a56.888889 56.888889 0 0 1 5.859556 1.592889c1.194667 0.398222 2.275556 0.967111 3.527111 1.308444l-0.910222-0.227555c2.275556 1.194667 4.551111 2.503111 6.599111 3.925333l0.796444 0.682667 4.323556 4.209777 0.056889 0.170667-0.455111-0.967111c0.455111 0.910222 1.137778 1.706667 1.706666 2.503111 1.137778 1.763556 2.275556 3.697778 3.413334 5.688889l0.568889 1.479111 0.398222 1.137778a39.537778 39.537778 0 0 1 1.592889 5.859555l0.113778 0.341334v-1.308445l0.170666 2.503111c0.113778 1.763556 0.113778 3.584 0.113778 5.404445v16.782222H643.413333a55.523556 55.523556 0 0 0-55.523555 55.580444v226.986667c0 30.72 24.803556 55.523556 55.523555 55.523556h226.986667a55.637333 55.637333 0 0 0 55.580444-55.466667v-226.986667a55.751111 55.751111 0 0 0-16.270222-39.310222 55.352889 55.352889 0 0 0-39.082666-15.928889z" fill="#7997E4" p-id="4830"></path></svg>
          <h3 style="font-size: 1.2rem">æ¶æ„å˜æ›´</h3> -->
          <p style="font-size: 0.8rem">é€‰æ‹©ç»„ä»¶ã€æ¨¡å—å’Œæ–‡ä»¶æŸ¥çœ‹å˜æ›´è¯¦æƒ…</p>
        </div>


        <div class="tree-content">
          <ul class="tree-list">
            <!-- ä¸€çº§åˆ†ç±» -->
            <li v-for="(item, index) in treeData" :key="index" class="parent-node">
              <!-- <div class="tree-item" @click="selectItem(item)"> -->
                <div class="tree-item">
                <span class="icon" :class="item.icon"></span>
                <span class="label" @click="selectItem(item)">{{ item.label }}</span>
                <span v-if="item.children" class="arrow"
                      :class="{ 'expanded': item.expanded }"
                      @click.stop="toggleExpand(item)">
                  â–²
                </span>
              </div>

              <!-- å¯¹é¡¹ç›®é€†å‘ç»“æœå±‚æ¬¡å›¾åšæ¨ªå‘å±•ç¤º -->
              <div v-if="item.label === 'é¡¹ç›®é€†å‘ç»“æœå±‚æ¬¡å›¾' && item.expanded" class="subtree">
                <div class="horizontal-children">
                  <div v-for="child in item.children"
                      :key="child.label"
                      :class="['child-card', { active: selectedItem === child }]"
                      @click.stop="selectItem(child)"
                      style="padding: 2px;">
                    <div class="tree-item">
                      <span class="icon" :class="child.icon"></span>
                      <span class="label">{{ child.label }}</span>
                    </div>
                  </div>
                </div>
                <div v-if="selectedTreeParent && selectedTreeParent.type" class="child-detail">
                  <div class="meta-info">
                    <div><strong>ç‰ˆæœ¬ï¼š</strong>{{ selectedTreeParent.version }}</div>
                    <!-- <div><strong>åˆ†æ”¯ï¼š</strong>{{ selectedItem.brench }}</div> -->
                    <div><strong>æ—¶é—´ï¼š</strong>{{ selectedTreeParent.time }}</div>
                  </div>

                  <div class="divider-line"></div>

                  <el-tree
                    v-if="selectedTreeParent && selectedTreeParent.isTree"
                    :data="selectedTreeParent.treeData"
                    :props="{ label: 'label' , children: 'children'}"
                    :expand-on-click-node="false"
                    
                    class="sub-el-tree"
                  >
                  <!-- :render-content="renderContent" -->
                     <template #default="{ data }">
                      <span class="custom-tree-node" @click.stop="handleTreeNodeClick(data)">
                        {{ data.label }}
                        <span v-if="getChangeSymbol(data.changes_number)" style="display: inline-flex; align-items: center; gap: 6px; margin-left: 8px;">
                          <!-- æ•°å­—åœ†åœˆ -->
                          <span
                            class="change-indicator"
                            :class="getChangeColorClass(data.changeColor)"
                          >
                            {{ getChangeSymbol(data.changes_number) }}
                          </span>
                          <!-- å«ä¹‰åœ†åœˆ -->
                          <span
                            class="change-indicator"
                            :class="getChangeColorClass(data.changeColor)"
                            style="font-size: 10px;"
                          >
                            {{ getChangeMeaning(data.changeColor) }}
                          </span>
                        </span>
                      </span>
                    </template>
                  </el-tree>
                </div>
              </div>

              <!-- æ™®é€šæ ‘å½¢å±•ç¤ºï¼šå˜æ›´åˆ†æç»“æœï¼ˆä¿æŒä¸å˜ï¼‰ -->
              <ul v-if="item.label !== 'é¡¹ç›®é€†å‘ç»“æœå±‚æ¬¡å›¾' && item.children && item.expanded" class="subtree">
                <li v-for="(child, childIndex) in item.children"
                    :key="childIndex"
                    :class="{ 'active': selectedItem === child }">
                  <div class="tree-item" @click.stop="selectItem(child)">
                    <span class="icon" :class="child.icon"></span>
                    <span class="label">{{ child.label }}</span>

                    <button v-if="['æŒ‡æ ‡å†å²å˜æ›´åˆ†æ', 'æ¶æ„å˜æ›´æŠ¥å‘Š'].includes(child.label)"
                            class="download-btn"
                            @click.stop="downloadNode(child)">
                      ä¸‹è½½
                    </button>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </div>

      </div>
      <!-- è¿™æ˜¯æ–°çš„æ‹–æ‹½æ¡ -->
      <div 
        class="drag-bar" 
        @mousedown="startDrag"
      ></div>
      <!-- è¿”å›æŒ‰é’®ï¼Œæ”¾åœ¨sidebaråº•éƒ¨ -->
      <button class="sidebar-back-btn" @click="goHomePageCopy">è¿”å›é¦–é¡µ</button>
    </div>

    <!-- å³ä¾§å†…å®¹åŒºåŸŸ -->
    <div class="content-area">
      <div v-if="selectedItem" class="content-container">
        <div class="content-header">
          <h2>{{ selectedItem.label }}</h2>
        </div>
        <div class="content-body">
          <!-- å¦‚æœæœ‰mdContentï¼Œå°±ä¼˜å…ˆæ˜¾ç¤ºmdå†…å®¹ -->
          <div v-if="mdContent" class="markdown-content"
          :style="{
            height: before_code || after_code || temporary_node_category=='Function'
              ? 'calc(100% - ' + codeDiffHeight + 'px - 8px)'
              : '100%'
          }"
          ref="contentBody"
          >
            <div v-html="renderedContent"></div>
            <!-- ä½¿ç”¨ markdown-it æ¸²æŸ“åçš„å†…å®¹ -->
          </div>
          <!-- æ‹–æ‹½æ¡ï¼šåªæœ‰ Function èŠ‚ç‚¹æ‰æ˜¾ç¤º -->
          <div
            v-if="before_code || after_code || temporary_node_category=='Function'"
            class="resize-bar"
            @mousedown="startResize"
          ></div>
          <!-- æ–°å¢ä»£ç å¯¹æ¯”çª—å£ -->
          <div v-if="before_code || after_code || temporary_node_category=='Function'" class="code-diff-container" :style="{height: codeDiffHeight + 'px', overflow: 'auto'}">
            <div class="diff-header">
              <span class="diff-label">{{version1}}</span>
              <span class="diff-label">{{version2}}</span>
            </div>
            <vue-code-diff
              :old-string="before_code || ''"
              :new-string="after_code || ''"
              :context="10"
              output-format="side-by-side"
              language="diff"
              :render-nothing-when-empty="true"
              style="height: calc(100% - 32px); background: #fff;"
            />
          </div>
          <!-- å¦‚æœæ²¡æœ‰mdContentï¼Œå°±æ˜¾ç¤ºç»„ä»¶å†…å®¹ -->

          <!-- è¿™é‡Œæ ¹æ®é€‰ä¸­çš„é¡¹ç›®ç±»å‹æ˜¾ç¤ºä¸åŒçš„å†…å®¹ -->
          <template v-else-if="selectedItem && selectedItem.component">
            <component :is="selectedItem.component" ref="tableShow" />
          </template>
  <!-- <component v-else-if="selectedItem && selectedItem.component" :is="selectedItem.component" ref="tableShow" /> -->
          <!-- <div v-else class="default-content">
            <p>è¯·é€‰æ‹©å·¦ä¾§é¡¹ç›®æŸ¥çœ‹è¯¦æƒ…</p>
          </div> -->
          <!-- <template v-else>
            <div class="default-content">
              <p>è¯·é€‰æ‹©å·¦ä¾§é¡¹ç›®æŸ¥çœ‹è¯¦æƒ…</p>
            </div>
          </template> -->
        </div>
      </div>
      <div v-else class="empty-content">
        <p>è¯·é€‰æ‹©å·¦ä¾§é¡¹ç›®æŸ¥çœ‹è¯¦æƒ…</p>
      </div>

      <!-- å³ä¾§ä¾§è¾¹æ  -->
      <div v-if="sidebarVisible" class="right-sidebar">
        <div class="sidebar-header">
          <h3>{{ sidebarTitle }}</h3>
          <button class="close-btn" @click="closeSidebar">å…³é—­</button>
        </div>
        <div class="sidebar-content">
          <p v-html="sidebarContent"></p>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import ArchitectureView from './ArchitectureView.vue'
import TableShow from '@/components/new/main/TableShow.vue'
import ArchitectureChange from '@/components/new/main/architectureChange.vue';
import { marked } from 'marked'
import axios from 'axios'
import EventBus from '@/components/eventBus.js'
import VMdPreview from "@kangc/v-md-editor/lib/preview"
import VMdEditor from '@kangc/v-md-editor'
import githubTheme from '@kangc/v-md-editor/lib/theme/github'
import '@kangc/v-md-editor/lib/style/base-editor.css'
import MarkdownIt from 'markdown-it';
import MermaidGraph from '../new/main/MermaidGraph.vue';
import VueCodeDiff from 'vue-code-diff';
import { version } from 'cytoscape';
VMdEditor.use(githubTheme)
VMdPreview.use(githubTheme)

export default {
  name: 'ReverseAndChangesTotalPage',
  components: {
    ArchitectureView,
    TableShow,
    ArchitectureChange,
    VMdEditor,
    VMdPreview,
    MermaidGraph,
    VueCodeDiff,
  },
  data() {
    return {
      showUserMenu: false,
      username: localStorage.getItem("username") || "ç”¨æˆ·",
      loading: true,
      sidebarWidth: 250,   // åˆå§‹å®½åº¦ï¼ˆpxï¼‰
      isDragging: false,   // æ˜¯å¦æ­£åœ¨æ‹–åŠ¨
      startX: 0,           // å¼€å§‹æ‹–åŠ¨æ—¶é¼ æ ‡ä½ç½®
      startWidth: 0,        // å¼€å§‹æ‹–åŠ¨æ—¶sidebarå®½åº¦
      selectedItem: null,
      selectedTreeParent: null, // æ–°å¢
      treeData: [
        {
          label: 'é¡¹ç›®é€†å‘ç»“æœå±‚æ¬¡å›¾',
          icon: 'icon-folder',
          expanded: false,
          horizontal: true,
          children: [
            { label: 'V1å±‚æ¬¡ç»“æ„å›¾', icon: 'icon-file', expanded: false, type: 'v1', isTree: true, treeData: [], version: EventBus.version1, time: '2023'},
            { label: 'V2å±‚æ¬¡ç»“æ„å›¾', icon: 'icon-file', expanded: false, type: 'v2', isTree: true, treeData: [], version: EventBus.version2, time: EventBus.time}
          ]
        },
        {
          label: 'å˜æ›´åˆ†æç»“æœ',
          icon: 'icon-folder',
          expanded: false,
          horizontal: false,
          children: [
            { label: 'æŒ‡æ ‡å†å²å˜æ›´åˆ†æ', 
              icon: 'icon-file',
              component:'TableShow' },
            { 
              label: 'æ¶æ„å˜æ›´è§†å›¾', 
              icon: 'icon-file',
              // component: 'ArchitectureChange'
              component: 'MermaidGraph',
            },
            { 
              label: 'æ¶æ„å˜æ›´æŠ¥å‘Š', 
              icon: 'icon-file',
            }
          ]
        },
      ],
      jsonData1: null,
      jsonData2: null,
      defaultProps: {
        label: "name",
        children: "children"
      },
      mdContent: '',
      before_code : '',
      after_code :'',
      version1: EventBus.version1,
      version2: EventBus.version2,
      temporary_node_category: '', // ç”¨äºå­˜å‚¨ä¸´æ—¶èŠ‚ç‚¹çš„ category
      codeDiffHeight: 400, // ä»£ç å¯¹æ¯”çª—å£åˆå§‹é«˜åº¦
      isResizing: false,
      startY: 0,
      startHeight: 400,


      //ä½¿ç”¨markdown-itæ’ä»¶å±•ç¤ºmdæ–‡æ¡£å†…å®¹
      markdownIt :new MarkdownIt(),
      renderContent: '',// ç”¨äºel-tree
      //ä¾§è¾¹æ 
      sidebarVisible: false, // æ§åˆ¶å³ä¾§ä¾§è¾¹æ çš„æ˜¾ç¤º
      sidebarTitle: '', // ä¾§è¾¹æ æ ‡é¢˜
      sidebarContent: '', // ä¾§è¾¹æ å†…å®¹
    }
  },
  mounted(){
    this.showChildTreeData();
    this.treeData[0].children[0].version = EventBus.version1;
    // this.treeData[0].children[0].branch = 'master';
    this.treeData[0].children[0].time = EventBus.time;
    this.treeData[0].children[1].version = EventBus.version2;
    // this.treeData[0].children[1].branch = 'main2';
    this.treeData[0].children[1].time = EventBus.time;
    // this.treeData[0].children[0].treeData = [
    //      { label: 'æ¨¡å—1', children:[{label: 'æ¨¡å—3'}]},
    //      { label: 'æ¨¡å—2'}
    // ]
    this.setNodeLevels(this.treeData)
  },
  methods: {
    // ç»™å½“å‰ç‚¹å‡»çš„å­©å­èŠ‚ç‚¹æ·»åŠ è¶…é“¾æ¥åŠŸèƒ½
    bindChildLinks() {
    const links = document.querySelectorAll('.md-child-link');
    links.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const label = link.dataset.label;
        // æ‰¾åˆ°å¯¹åº”çš„å­èŠ‚ç‚¹
        const child = this.selectedItem.children.find(c => c.label === label);
        if (child) {
          this.handleTreeNodeClick(child); // æˆ– this.selectItem(child)
        }
      });
    });
  },
    // å¤„ç†çª—å£å¤§å° ä»£ç å·®å¼‚
    startResize(e) {
      this.isResizing = true;
      this.startY = e.clientY;
      this.startHeight = this.codeDiffHeight;
      document.addEventListener('mousemove', this.onResize);
      document.addEventListener('mouseup', this.stopResize);
    },
    onResize(e) {
      if (!this.isResizing) return;
      const delta = e.clientY - this.startY;
      let newHeight = this.startHeight - delta;
      if (newHeight < 100) newHeight = 100;
      if (newHeight > this.$refs.contentBody.offsetHeight - 100) newHeight = this.$refs.contentBody.offsetHeight - 100;
      this.codeDiffHeight = newHeight;
    },
    stopResize() {
      this.isResizing = false;
      document.removeEventListener('mousemove', this.onResize);
      document.removeEventListener('mouseup', this.stopResize);
    },
     getChangeMeaning(color) {
      const map = {
        green: 'ADD',
        red: 'DEL',
        blue: 'STABLE',
        yellow: 'MOVE'
      };
      return map[color] || '';
    },
    getChangeSymbol(changes_number) {
      // è¿™é‡Œåªè¿”å›æ•°å­—ï¼Œcolor åªç”¨äº class
      return changes_number !== undefined ? changes_number : '';
    },
    // è·å–å¯¹åº”é¢œè‰² class
    getChangeColorClass(color) {
      return {
        green: 'circle-green',
        red: 'circle-red',
        blue: 'circle-blue',
        yellow: 'circle-yellow'
      }[color] || '';
    },
    goHomePageCopy() {
      this.$router.push('/HomePagecopy');
    },
     toggleUserMenu() {
      this.showUserMenu = !this.showUserMenu;
    },
    goUserInfo() {
      this.$router.push("/userInfo");
    },
    logout() {
      localStorage.removeItem("isLogin");
      localStorage.removeItem("username");
      this.$router.push("/");
    },
    handleClickOutside(e) {
      if (!this.$el.contains(e.target)) {
        this.showUserMenu = false;
      }
    },
    setNodeLevels(nodes, level = 1) {
      nodes.forEach(node => {
        node._level = level;
        if (node.children) {
          this.setNodeLevels(node.children, level + 1);
        }
      });
    },
    showChildTreeData(){
      // v1
      // this.jsonData1 = EventBus.sharedFile1
      this.jsonData1 = EventBus.architecture1_change_json
      console.log("this.jsonData1",this.jsonData1)
      if (!this.jsonData1) {
          return;
      }
      this.jsonData1 = this.jsonData1["structure"];

      let tree = [];
      let map = {};

      // å…ˆåˆ›å»º id -> èŠ‚ç‚¹çš„æ˜ å°„
      this.jsonData1.forEach(item => {
          map[item.id] = { 
              ...item, 
              category: item.category === "item" ? "file" : item.category, // æ›¿æ¢ category
              changeColor: item.color,
              color: item.color,
              label: item.name,
              changes_number: item.changes_num,
              children: [] 
          };
      });

      // ç»„è£…æ ‘ç»“æ„
      this.jsonData1.forEach(item => {
          if (item.parentId === -1) {
              tree.push(map[item.id]); // æ ¹èŠ‚ç‚¹
          } else  {
          if (map[item.parentId]) {
              map[item.parentId].children.push(map[item.id]); // è¿½åŠ åˆ°çˆ¶èŠ‚ç‚¹çš„ children
          }
          }
      });

      this.treeData[0].children[0].treeData = tree;
      console.log("V1----tree")
      console.log(tree)
      // v2
      // this.jsonData2 = EventBus.sharedFile2
      this.jsonData2 = EventBus.architecture2_change_json
      console.log("this.jsonData2",this.jsonData2)
      if (!this.jsonData2) {
          return;
      }
      this.jsonData2 = this.jsonData2["structure"];

      tree = [];
      map = {};

      // å…ˆåˆ›å»º id -> èŠ‚ç‚¹çš„æ˜ å°„
      this.jsonData2.forEach(item => {
          map[item.id] = { 
              ...item, 
              category: item.category === "item" ? "file" : item.category, // æ›¿æ¢ category
              changeColor: item.color,
              color: item.color,
              label: item.name,
              changes_number: item.changes_num,
              children: [] 
          };
        });

        // ç»„è£…æ ‘ç»“æ„
        this.jsonData2.forEach(item => {
            if (item.parentId === -1) {
                tree.push(map[item.id]); // æ ¹èŠ‚ç‚¹
            } else {
            if (map[item.parentId]) {
                map[item.parentId].children.push(map[item.id]); // è¿½åŠ åˆ°çˆ¶èŠ‚ç‚¹çš„ children
            }
            }
        });

        this.treeData[0].children[1].treeData = tree;
        console.log("V2----tree")
        console.log(tree)
    },
    renderContent(h, { node, data, store }) {
    return h(
      'span',
      {
        class: 'custom-tree-node',
        on: {
            click: (e) => {
            // åªæœ‰ä¸€çº§èŠ‚ç‚¹ï¼ˆçˆ¶èŠ‚ç‚¹ï¼‰æ‰å…è®¸åˆ‡æ¢å±•å¼€çŠ¶æ€
            if (node.level === 1) {
              node.expanded = !node.expanded;
            }
            // æ— è®ºçˆ¶å­èŠ‚ç‚¹éƒ½å¤„ç†é€‰ä¸­é€»è¾‘
            this.handleTreeNodeClick(node);
            // é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œé¿å… el-tree é»˜è®¤è¡Œä¸º
            e.stopPropagation();
          }
        }
      },
      [
        h('span', data.label),
        data.changeColor
          ? h(
              'span',
              {
                class: ['change-indicator', this.getChangeColorClass(data.changeColor)]
              },
              this.getChangeSymbol(data.changeColor)
            )
          : null
      ]
    )
    },
    handleTreeNodeClick(node) {
      // æ¯æ¬¡ç‚¹å‡»èŠ‚ç‚¹éƒ½å…ˆæ¸…ç©ºä»£ç å†…å®¹
      this.before_code = '';
      this.after_code = '';
      this.temporary_node_category = node.category;
      // åˆ¤æ–­æ˜¯å¦æ˜¯çˆ¶èŠ‚ç‚¹
      if (node._level === 1) {
        // æ˜¯çˆ¶èŠ‚ç‚¹ï¼Œä¸åŠ è½½Markdown
        this.selectedItem = node;  // é€‰ä¸­è¯¥çˆ¶èŠ‚ç‚¹
        // ä¿è¯çˆ¶èŠ‚ç‚¹å§‹ç»ˆå±•å¼€
        if (this.treeData[0].children[0]) {
          this.treeData[0].children[0].expanded = true;
        }
        this.mdContent = '';  // æ¸…ç©ºMarkdownå†…å®¹
        return;
      }
      
      // å¦‚æœæ˜¯å­èŠ‚ç‚¹ï¼ŒåŠ è½½Markdown
      this.selectedItem = node; // é€‰ä¸­è¯¥å­èŠ‚ç‚¹
      console.log("é€‰ä¸­å­èŠ‚ç‚¹:", node);
      this.mdContent = ''; // æ¸…ç©ºMarkdownå†…å®¹
      console.log("é€‰ä¸­çš„label:", this.selectedItem.label);
      this.loadMarkdown(node);
      
    },
    async loadMarkdown(node) {
      // try {
      //   const response = await axios.get(mdPath);
      //   const text = response.data;  // è·å–mdæ–‡ä»¶å†…å®¹
      //   this.mdContent = marked(text);  // è½¬æˆHTMLæ˜¾ç¤º
      // } catch (error) {
      //   console.error('åŠ è½½MDæ–‡ä»¶å¤±è´¥', error);
      //   this.mdContent = '<p>åŠ è½½å¤±è´¥</p>';
      // }
      try {
          const response = await axios.post("http://localhost:5000/get_markdown",
            {
              label: node.label,
              category: node.category,
              function: node.Functionality,
              node_allInfo:node 
            }
          );
          console.log("http://localhost:5000/get_markdownä¸­çš„èŠ‚ç‚¹label:", node.label);
          this.mdContent = response.data.content;
          this.before_code = response.data.before_code;
          this.after_code = response.data.after_code;
          this.temporary_node_category = node.category; // å­˜å‚¨ä¸´æ—¶èŠ‚ç‚¹çš„ category
          // ä½¿ç”¨ markdown-it æ¸²æŸ“ Markdown å†…å®¹ä¸º HTML
          // this.renderedContent = this.markdownIt.render(this.mdContent);
          // this.loading = false;

          // å…ˆç”¨ markdown-it æ¸²æŸ“
          let html = this.markdownIt.render(this.mdContent);

          // 1. åœ¨é¡¶éƒ¨æ’å…¥ä¸€æ’å­èŠ‚ç‚¹é“¾æ¥
          // if (node.children && node.children.length > 0) {
          //   let linksHtml = `<div class="md-children-links">`;
          //   node.children.forEach(child => {
          //     linksHtml += `<a href="#" class="md-child-link" data-label="${child.label}     </a> `;
            
          //     });
          //   linksHtml += `</div>`;
          //   html = linksHtml + html;
          // }

          // 2. æ›¿æ¢å†…å®¹ä¸­æ‰€æœ‰å­èŠ‚ç‚¹labelä¸ºè¶…é“¾æ¥
          if (node.children && node.children.length > 0) {
            node.children.forEach(child => {
              // æ­£åˆ™å…¨å±€æ›¿æ¢ï¼Œæ³¨æ„è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦
              const reg = new RegExp(child.label.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
              html = html.replace(
                reg,
                `<a href="#" class="md-child-link" data-label="${child.label}" style="color:#1976d2;text-decoration:underline;">${child.label}</a>`
              );
            });
          }
          this.renderedContent = html;
          this.loading = false;


          console.log("http://localhost:5000/get_markdownçš„label",node.label);
          console.log("http://localhost:5000/before_code",this.before_code);
          console.log("http://localhost:5000/get_markdownçš„after_code",this.after_code);
          console.log("http://localhost:5000/get_markdownçš„category",node.category);
          console.log("http://localhost:5000/get_markdownçš„function",node.Functionality);
      // æ¸²æŸ“åæ·»åŠ æŠ˜å æ•ˆæœï¼ˆéœ€å»¶è¿Ÿæ‰§è¡Œï¼‰
          this.$nextTick(() => {
            this.addCollapsibleBehavior();
            this.bindChildLinks();
          });
        } catch (error) {
          console.error("è·å– Markdown å¤±è´¥:", error);
          this.loading = false;
        }
    },
    // addCollapsibleBehavior() {
    //   const preview = document.querySelector('.v-md-editor-preview');
    //   if (!preview) return;

    //   let html = preview.innerHTML;

    //     // è¯†åˆ«å‡½æ•°åå¦‚ï¼šprocessData()
    //   html = html.replace(/\b(\w+)\(\)/g, (match, p1) => {
    //       return `<a href="#" class="md-key" data-key="${p1}">${match}</a>`;
    //   });

    //     // è¯†åˆ« commitID å¦‚ abc1234
    //   html = html.replace(/\b[a-f0-9]{7,}\b/gi, (match) => {
    //     return `<a href="#" class="md-key" data-key="${match}">${match}</a>`;
    //   });

    //   preview.innerHTML = html;

    //   // this.bindLinkClicks();


    //   const headers = preview.querySelectorAll("h1, h2, h3"); // ä½ ä¹Ÿå¯ä»¥åªé€‰ h1 æˆ– h2

    //   headers.forEach(header => {
    //     header.style.cursor = 'pointer';
    //     header.style.userSelect = 'none';

    //     let next = header.nextElementSibling;
    //     const children = [];

    //     while (next && !/^H[1-3]$/.test(next.tagName)) {
    //       children.push(next);
    //       next = next.nextElementSibling;
    //     }

    //     const wrapper = document.createElement('div');
    //     wrapper.classList.add('collapsible-content');
    //     children.forEach(child => wrapper.appendChild(child));

    //     header.after(wrapper);

    //     // åˆå§‹æŠ˜å çŠ¶æ€
    //     wrapper.style.display = 'none';

    //     header.addEventListener('click', () => {
    //       wrapper.style.display = wrapper.style.display === 'none' ? 'block' : 'none';
    //     });
    //   });
    // },
    addCollapsibleBehavior() {
      const container = document.querySelector('.markdown-content');
      if (!container) return;

      // è·å–æ‰€æœ‰æ ‡é¢˜æ ‡ç­¾
      const headers = container.querySelectorAll('h1, h2, h3');

      headers.forEach((header) => {
        // è®¾ç½®æ ‡é¢˜æ ·å¼
        header.style.cursor = 'pointer';
        header.style.userSelect = 'none';

        // æ‰¾åˆ°æ ‡é¢˜åçš„æ‰€æœ‰å…„å¼ŸèŠ‚ç‚¹ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªæ ‡é¢˜
        let next = header.nextElementSibling;
        const siblings = [];
        while (next && !/^H[1-3]$/.test(next.tagName)) {
          siblings.push(next);
          next = next.nextElementSibling;
        }

        // åˆ›å»ºä¸€ä¸ªå®¹å™¨åŒ…è£¹è¿™äº›å…„å¼ŸèŠ‚ç‚¹
        const wrapper = document.createElement('div');
        wrapper.classList.add('collapsible-content');
        siblings.forEach((sibling) => wrapper.appendChild(sibling));

        
        // åˆå§‹çŠ¶æ€ä¸ºå±•å¼€
        wrapper.style.display = 'block'; // å°†é»˜è®¤çŠ¶æ€è®¾ç½®ä¸ºå±•å¼€
        header.classList.add('expanded'); // æ·»åŠ å±•å¼€æ ·å¼
        header.after(wrapper);

        // æ·»åŠ ç‚¹å‡»äº‹ä»¶
        header.addEventListener('click', () => {
          const isCollapsed = wrapper.style.display === 'none';
          wrapper.style.display = isCollapsed ? 'block' : 'none';
          header.classList.toggle('expanded', isCollapsed);
        });
      });
    },
    bindLinkClicks() {
      const links = document.querySelectorAll(".md-key");
      links.forEach((link) => {
        link.addEventListener("click", async (e) => {
          e.preventDefault();
          const key = link.dataset.key;
          // æ ¹æ®ç‚¹å‡»çš„å†…å®¹åŠ¨æ€æ›´æ–°ä¾§è¾¹æ 
        if (link.classList.contains("commit-id")) {
          this.sidebarTitle = `Commit ID: ${key}`;
          this.sidebarContent = `è¯¦ç»†ä¿¡æ¯ï¼šè¿™æ˜¯ Commit ID ä¸º ${key} çš„ç›¸å…³å†…å®¹ã€‚`;
        } else if (link.classList.contains("function-name")) {
          this.sidebarTitle = `å‡½æ•°å: ${key}`;
          this.sidebarContent = `è¯¦ç»†ä¿¡æ¯ï¼šè¿™æ˜¯å‡½æ•° ${key} çš„ç›¸å…³å†…å®¹ã€‚`;
        } else if (link.classList.contains("file-name")) {
          this.sidebarTitle = `æ–‡ä»¶å: ${key}`;
          this.sidebarContent = `è¯¦ç»†ä¿¡æ¯ï¼šè¿™æ˜¯æ–‡ä»¶ ${key} çš„ç›¸å…³å†…å®¹ã€‚`;
        }

        // æ˜¾ç¤ºä¾§è¾¹æ 
        this.sidebarVisible = true;
        });
      });
    },

    async downloadNode(child) {
        try {
            let url = '';
            let filename = '';
            let params = {};
            let blob;

            if (child.label === 'æŒ‡æ ‡å†å²å˜æ›´åˆ†æ') {
              // å‡è®¾TableShowç»„ä»¶æœ‰ref="tableShow"
              this.$refs.tableShow.exportToExcel();
              return;
            } else if (child.label === 'æ¶æ„å˜æ›´è§†å›¾') {
              url = 'http://localhost:5000/download_arch_view';
              filename = 'æ¶æ„å˜æ›´è§†å›¾.png';
              const response = await axios.post(url, params, { responseType: 'blob' });
              blob = new Blob([response.data]);
            } else if (child.label === 'æ¶æ„å˜æ›´æŠ¥å‘Š') {
              // ç›´æ¥å°†å³ä¾§æ çš„mdå†…å®¹ä¸‹è½½ä¸ºmdæ–‡ä»¶
              filename = 'æ¶æ„å˜æ›´æŠ¥å‘Š.md';
              // this.mdContent æ˜¯åŸå§‹markdownæ–‡æœ¬
              blob = new Blob([this.mdContent], { type: 'text/markdown' });
            }

            if (blob) {
              const link = document.createElement('a');
              link.href = URL.createObjectURL(blob);
              link.download = filename;
              document.body.appendChild(link);
              link.click();
              document.body.removeChild(link);
              URL.revokeObjectURL(link.href);
            }
          } catch (e) {
            this.$message && this.$message.error ? this.$message.error('ä¸‹è½½å¤±è´¥') : alert('ä¸‹è½½å¤±è´¥');
          }
      },


    async selectItem(item) {
      this.selectedItem = item;
      // item.expanded = true; // ç¡®ä¿å±•å¼€
      console.log("SelectItemé€‰ä¸­é¡¹ç›®:", item);
      this.mdContent = ''; // æ¸…ç©ºMarkdownå†…å®¹
      // æ¶æ„å˜æ›´æŠ¥å‘Šï¼šè®¿é—®åç«¯è·å–mdå¹¶æ¸²æŸ“
      if (item.label === 'æ¶æ„å˜æ›´æŠ¥å‘Š') {
        try {
          const response = await axios.post('http://localhost:5000/get_markdown_architecture_change_report',{
            label: item.label,
          });
          this.mdContent = response.data.content;
          this.renderedContent = this.markdownIt.render(this.mdContent);
        } catch (e) {
          this.mdContent = '';
          this.renderedContent = '<p>åŠ è½½å¤±è´¥</p>';
        }
      }else if (item.label === 'V2å±‚æ¬¡ç»“æ„å›¾' || item.label === 'V1å±‚æ¬¡ç»“æ„å›¾') {
        this.selectedTreeParent = item; // è®°å½•çˆ¶èŠ‚ç‚¹
        this.selectedItem = item;       // ä¹Ÿå¯ä»¥åŒæ­¥é€‰ä¸­
        item.expanded = true;           // ä¿è¯å±•å¼€
        try {
          // æ¶æ„å˜æ›´è§†å›¾ï¼šç›´æ¥æ˜¾ç¤ºç»„ä»¶
          const response = await axios.post('http://localhost:5000/get_markdown_architecture_version_summary_report',{
            label: item.label,
          });
          this.mdContent = response.data.content;
          this.renderedContent = this.markdownIt.render(this.mdContent);
        } catch (e) {
          this.mdContent = '';
          this.renderedContent = '<p>åŠ è½½å¤±è´¥</p>';
        }
      }else {
        // å­èŠ‚ç‚¹ç‚¹å‡»ï¼Œåªåˆ‡æ¢ selectedItemï¼Œä¸åŠ¨ selectedTreeParent
        this.selectedItem = item;
        this.mdContent = '';
        // ...åŠ è½½å³ä¾§å†…å®¹...
      } 
    },
    toggleExpand(item) {
      // åˆ‡æ¢å±•å¼€çŠ¶æ€
      item.expanded = !item.expanded
    },
    startDrag(e) {
      this.isDragging = true;
      this.startX = e.clientX;
      this.startWidth = this.sidebarWidth;

      document.addEventListener('mousemove', this.onDrag);
      document.addEventListener('mouseup', this.stopDrag);
    },
    onDrag(e) {
      if (!this.isDragging) return;
      const deltaX = e.clientX - this.startX;
      let newWidth = this.startWidth + deltaX;
      // é™åˆ¶æœ€å°å®½åº¦
      if (newWidth < 150) newWidth = 150;
      // é™åˆ¶æœ€å¤§å®½åº¦ï¼ˆä½ å¯ä»¥æŒ‰éœ€è°ƒæ•´ï¼‰
      if (newWidth > 800) newWidth = 800;
      this.sidebarWidth = newWidth;
    },
    stopDrag() {
      this.isDragging = false;
      document.removeEventListener('mousemove', this.onDrag);
      document.removeEventListener('mouseup', this.stopDrag);
    },
  }
}
</script>

<style scoped>
.md-children-links {
  margin-bottom: 12px;
  font-size: 15px;
}
.md-child-link {
  color: #1976d2;
  text-decoration: underline;
  margin-right: 16px;
  cursor: pointer;
}
.md-child-link:hover {
  color: #125199;
  text-decoration: underline;
}

.code-diff-container {
  background: #fff;
  border-radius: 8px;
  overflow: auto;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  padding: 8px 0 0 0;
  transition: height 0.1s;
  overflow: auto;
  transition: height 0.1s;
  flex-direction: column;
  min-height: 100px;
}
.diff-header {
  display: flex;
  justify-content: space-between;
  padding: 0 32px 4px 32px;
  font-weight: bold;
  color: #333;
  overflow-y: auto;
}
.diff-label {
  font-size: 15px;
}
.resize-bar {
  height: 8px;
  background: #e0e0e0;
  cursor: row-resize;
  width: 100%;
  margin: 0;
  z-index: 10;
}
.split-area {
  position: relative;
  flex: 1;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.vscode-layout {
  display: flex;
  height: 100vh;
  background-color: #1e1e1e;
  color: #d4d4d4;
}

.tree-header {
  text-align: left;
  padding: 10px 15px;
  border-bottom: 1px solid grey;
}

.header-row {
  display: flex;
  align-items: center;
  gap: 8px;
}
.tree-header h3 {
  margin: 0;
  font-size: 1.4rem;
  font-weight: 600;
  color: #bbbbbb;
  display: inline-block;
}
.tree-header .icon {
  width: 1.2em;
  height: 1.2em;
  vertical-align: middle;
}


.sidebar {
  width: 250px;
  background-color: grey;
  border-right: 1px solid #333;
  /* overflow-y: auto; */
  overflow-y: auto; /* æ·»åŠ å‚ç›´æ»šåŠ¨æ¡ */
  height: 100%; /* ç¡®ä¿é«˜åº¦ä¸º100% */
  position: relative;
}

.tree-container {
  padding: 10px 0;
  /* max-height: calc(100vh - 20px); */
   /* é™åˆ¶æœ€å¤§é«˜åº¦ï¼Œé¿å…å†…å®¹æº¢å‡º */
  /* overflow-y: auto;  */
  /* æ·»åŠ æ»šåŠ¨æ¡ */
}

.tree-header {
  padding: 10px 15px;
  border-bottom: 1px solid grey;
}

.tree-header h3 {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  color: #bbbbbb;
}

.tree-content {
  padding: 10px 0;
}

.tree-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.tree-item {
  display: flex;
  align-items: center;
  padding: 6px 15px;
  gap: 8px;
  cursor: pointer;
  user-select: none;
}

.tree-item:hover {
  background-color: #2a2d2e;
}

.tree-item.active {
  background-color: #37373d;
}

.icon {
  margin-right: 8px;
  font-size: 16px;
}

.icon-folder {
  color: #e8c77e;
}

.icon-file {
  color: #6a9955;
}

.arrow {
  margin-left: auto;
  font-size: 12px;
  transition: transform 0.2s;
}

.arrow.expanded {
  transform: rotate(180deg);
}

.subtree {
  list-style: none;
  padding-left: 20px;
  margin: 0;
}

.horizontal-children {
  display: flex;
  gap: 1px;
  padding: 2px;
  flex-direction: row;
  flex-wrap: nowrap;       /* âœ… ä¸æ¢è¡Œ */
  overflow-x: auto; 
  padding-left: 20px;
}

.child-card {
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 12px;
  width: 240px;
}

.child-card.active {
  border: 2px solid #1890ff;
}

.meta-info {
  font-size: 14px;
  margin-top: 10px;
  margin-bottom: 10px;
  color: white;
  line-height: 1.6;
}

.divider-line {
  border-top: 1px solid #ccc;
  margin-top: 6px;
  margin-bottom: 6px;
}

.content-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  height: 100%;
  /* background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); */
  background : #fff !important;
}

.content-container {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  height: 100%;
  padding: 0;
}

.content-header {
  padding: 15px 20px;
  border-bottom: 1px solid #333;
}

.content-header h2 {
  margin: 0;
  font-size: 18px;
  color: black;
}

.content-body {
  flex: 1;
  height: 100%;
  position: relative;
  overflow: hidden;
  padding: 0;
  display: flex;
  flex-direction: column;
}

.markdown-content {
  color: black;
  padding-left: 2%;
  background-color: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  font-family: 'Arial', sans-serif; /* è®¾ç½®å­—ä½“ */
  margin: 0 auto;
  text-align: left; /* è®¾ç½®å·¦å¯¹é½ */
  line-height: 1.6; /* å¢åŠ è¡Œé«˜ï¼Œæå‡å¯è¯»æ€§ */
  overflow: auto;
  transition: height 0.1s;
  flex: 1 1 auto;
  min-height: 100px;
  word-wrap: break-word; /* è‡ªåŠ¨æ¢è¡Œ */
  overflow-y: auto; /* æ·»åŠ å‚ç›´æ»šåŠ¨æ¡ */
}
.markdown-content h1,
.markdown-content h2,
.markdown-content h3 {
  color: #2c3e50; /* è®¾ç½®æ ‡é¢˜é¢œè‰² */
  margin-top: 20px;
  margin-bottom: 10px;
  border-bottom: 1px solid #ddd; /* æ·»åŠ ä¸‹åˆ’çº¿ */
  padding-bottom: 5px;
}
.markdown-content p {
  margin: 10px 0;
}
.markdown-content ul,
.markdown-content ol {
  padding-left: 20px;
  margin: 10px 0;
}
.empty-content {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 10%;
  color: #666;
}

.default-content {
  padding: 20px;
  text-align: center;
  color: #666;
}
.sidebar {
  position: relative;
  height: 100vh;
  border-right: 1px solid #ccc;
  /* overflow: hidden; */
}

.drag-bar {
  width: 5px;
  background-color: #ddd;
  cursor: ew-resize; /* é¼ æ ‡å·¦å³æ‹‰ä¼¸å›¾æ ‡ */
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
}

.collapsible-content {
  display: none;
  margin-left: 20px; /* ç¼©è¿›æŠ˜å å†…å®¹ */
}

h1, h2, h3 {
  cursor: pointer;
  position: relative;
}

h1::after, h2::after{
  content: 'â–¼'; /* æŠ˜å ç®­å¤´ */
  position: absolute;
  right: 10px;
  font-size: 12px;
  transition: transform 0.2s;
}

h1.expanded::after, h2.expanded::after, h3.expanded::after {
  transform: rotate(180deg); /* å±•å¼€ç®­å¤´ */
}
.avatar-emoji {
  font-size: 1.5rem;
  margin-right: 8px;
}
.sidebar-back-btn {
  /* position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 24px; */
  width: 80%;
  padding: 10px 0;
  background: #595c5c;
  color: #fff;
  border: none;
  border-radius: 8px;
  font-size: 1.1rem;
  cursor: pointer;
  z-index: 200;
  transition: background 0.2s;
}
.sidebar-back-btn:hover {
  background-color: #2a2d2e
}

.custom-tree-node {
  display: inline-flex;
  align-items: center;
}

.change-indicator {
  display: inline-flex;
  justify-content: center;
  align-items: center;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  font-size: 12px;
  margin-left: 6px;
  font-weight: bold;
  border: 2px solid;
}

/* æ¯ç§é¢œè‰²çš„åœ†åœˆæ ·å¼ */
.circle-green {
  color: green;
  border-color: green;
}
.circle-red {
  color: red;
  border-color: red;
}
.circle-blue {
  color: blue;
  border-color: blue;
}
.circle-yellow {
  color: yellow;
  border-color: yellow;
}

</style>